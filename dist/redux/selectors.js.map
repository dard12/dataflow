{"version":3,"file":"selectors.js","sourceRoot":"/","sources":["redux/selectors.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,4CAAkD;AAClD,kDAAuB;AACvB,2CAA0C;AAE1C,IAAM,YAAY,GAAG,wBAAc,CACjC,UAAC,KAAU,YAAK,OAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,0CAAE,EAAE,CAAA,EAAA,EAChC,UAAC,IAAY,IAAK,OAAA,IAAI,EAAJ,CAAI,CACvB,CAAC;AAEF,IAAM,gBAAgB,GAAG,wBAAc,CACrC,UAAC,KAAU,YAAK,OAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,0CAAE,QAAQ,CAAA,EAAA,EACtC,UAAC,QAAgB,IAAK,OAAA,QAAQ,EAAR,CAAQ,CAC/B,CAAC;AAEF,IAAM,iBAAiB,GAAG,UAAC,EAM1B;QALC,UAAU,gBAAA,EACV,EAAE,QAAA;IAKF,OAAO,wBAAc,CACnB,UAAC,KAAU,gBAAK,OAAA,CAAC,EAAE,CAAC,CAAC,CAAC,MAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,WAAW,0CAAG,UAAU,CAAC,0CAAG,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAA,EAAA,EACzE,UAAC,GAAG,IAAK,OAAA,GAAG,EAAH,CAAG,CACb,CAAC;AACJ,CAAC,CAAC;AAEF,IAAM,qBAAqB,GAAG,UAAC,EAQ9B;QAPC,UAAU,gBAAA,EACV,MAAM,YAAA,EACN,KAAK,WAAA;IAML,OAAO,wBAAc,CACnB,UAAC,KAAU,YAAK,OAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,WAAW,0CAAG,UAAU,CAAC,CAAA,EAAA,EAChD,UAAC,cAAc;QACb,IAAI,OAAO,GAAG,gBAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAEvC,IAAI,MAAM,EAAE;YACV,OAAO,GAAG,gBAAC,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SACrC;QAED,IAAI,KAAK,EAAE;YACT,OAAO,GAAG,gBAAC,CAAC,OAAO,OAAT,gBAAC,iBAAS,OAAO,GAAK,KAAK,EAAC,CAAC;SACxC;QAED,OAAO,OAAO,CAAC;IACjB,CAAC,CACF,CAAC;AACJ,CAAC,CAAC;AAEK,IAAM,WAAW,GAAG,UAAC,IAAa;IACvC,IAAM,YAAY,GAAG,yBAAW,CAAC,YAAY,CAAC,CAAC;IAC/C,OAAO,OAAO,CAAC,IAAI,IAAI,IAAI,KAAK,YAAY,CAAC,CAAC;AAChD,CAAC,CAAC;AAHW,QAAA,WAAW,eAGtB;AAEK,IAAM,OAAO,GAAG;IACrB,OAAO,yBAAW,CAAC,YAAY,CAAC,CAAC;AACnC,CAAC,CAAC;AAFW,QAAA,OAAO,WAElB;AAEK,IAAM,WAAW,GAAG;IACzB,OAAO,yBAAW,CAAC,gBAAgB,CAAC,CAAC;AACvC,CAAC,CAAC;AAFW,QAAA,WAAW,eAEtB;AAEK,IAAM,MAAM,GAAG,UAAC,EAMtB;QALC,UAAU,gBAAA,EACV,EAAE,QAAA;IAKF,OAAO,yBAAW,CAAC,iBAAiB,CAAC,EAAE,UAAU,YAAA,EAAE,EAAE,IAAA,EAAE,CAAC,CAAC,CAAC;AAC5D,CAAC,CAAC;AARW,QAAA,MAAM,UAQjB;AAEK,IAAM,UAAU,GAAG,UAAC,EAQ1B;QAPC,UAAU,gBAAA,EACV,MAAM,YAAA,EACN,KAAK,WAAA;IAML,OAAO,yBAAW,CAAC,qBAAqB,CAAC,EAAE,UAAU,YAAA,EAAE,MAAM,QAAA,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC,CAAC;AAC3E,CAAC,CAAC;AAVW,QAAA,UAAU,cAUrB","sourcesContent":["import { createSelector } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport { useSelector } from 'react-redux';\n\nconst userSelector = createSelector(\n  (state: any) => state?.login?.id,\n  (user: string) => user,\n);\n\nconst usernameSelector = createSelector(\n  (state: any) => state?.login?.username,\n  (username: string) => username,\n);\n\nconst createDocSelector = ({\n  collection,\n  id,\n}: {\n  collection: string;\n  id?: string;\n}) => {\n  return createSelector(\n    (state: any) => (id ? state?.collections?.[collection]?.[id] : undefined),\n    (doc) => doc,\n  );\n};\n\nconst createDocListSelector = ({\n  collection,\n  filter,\n  order,\n}: {\n  collection: string;\n  filter?: any;\n  order?: any;\n}): any => {\n  return createSelector(\n    (state: any) => state?.collections?.[collection],\n    (collectionDict) => {\n      let docList = _.values(collectionDict);\n\n      if (filter) {\n        docList = _.filter(docList, filter);\n      }\n\n      if (order) {\n        docList = _.orderBy(docList, ...order);\n      }\n\n      return docList;\n    },\n  );\n};\n\nexport const useIsMyself = (user?: string) => {\n  const loggedInUser = useSelector(userSelector);\n  return Boolean(user && user === loggedInUser);\n};\n\nexport const useUser = () => {\n  return useSelector(userSelector);\n};\n\nexport const useUsername = () => {\n  return useSelector(usernameSelector);\n};\n\nexport const useDoc = ({\n  collection,\n  id,\n}: {\n  collection: string;\n  id?: string;\n}) => {\n  return useSelector(createDocSelector({ collection, id }));\n};\n\nexport const useDocList = ({\n  collection,\n  filter,\n  order,\n}: {\n  collection: string;\n  filter?: any;\n  order?: any;\n}): any[] => {\n  return useSelector(createDocListSelector({ collection, filter, order }));\n};\n"]}